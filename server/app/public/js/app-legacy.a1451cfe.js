(function(){"use strict";var t={4039:function(t,e,i){i(6992),i(8674),i(9601),i(7727);var o=i(8935),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("router-view")],1)},l=[],s={},a=s,r=i(1001),c=(0,r.Z)(a,n,l,!1,null,null,null),u=c.exports,d=i(2809),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book"},[i("el-button",{attrs:{type:"btn"},on:{click:t.createBook}},[t._v("添加书籍")]),i("el-table",{attrs:{data:t.bookList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticClass:"pic",attrs:{src:t.row.img,alt:""}})]}}])}),i("el-table-column",{attrs:{prop:"title",label:"姓名"}}),i("el-table-column",{attrs:{label:"详情",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.getDetail(e.row.id)}}},[t._v("查看章")])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateBook(e.row.id,e.row.title,e.row.img,e.row.orderby)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteBook(e.row.id)}}},[t._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"添加",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{attrs:{id:"cover"}},[i("span",{staticClass:"cover_cover"},[t._v("上传封面:")]),i("el-upload",{attrs:{action:t.getUploadUrl(),"list-type":"picture-card","on-preview":t.handleSuccess,"on-remove":t.handleRemove,headers:t.headers,"on-success":t.handleSuccess,"file-list":t.fileList}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-form",[i("el-form-item",{attrs:{label:"书籍名称"}},[i("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("el-form-item",{attrs:{label:"排序权重"}},[i("el-input",{model:{value:t.orderby,callback:function(e){t.orderby=e},expression:"orderby"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},f=[],p=i(6166),m=i.n(p),b=m().create({baseURL:"/",timeout:5e3});b.interceptors.request.use((function(t){return localStorage.getItem("token")&&(t.headers["token"]=localStorage.getItem("token")),t}));var g=b,v={methods:{getDetail:function(t){this.$router.push("/chapter?book_id=".concat(t))},save:function(){var t=this;this.isEdit?g.put("/book/".concat(this.updateId),{title:this.title,img:this.img,orderby:this.orderby}).then((function(){t.getBookList(),t.dialogVisible=!1})):g.post("/book",{title:this.title,img:this.img,orderby:this.orderby}).then((function(){t.getBookList(),t.dialogVisible=!1}))},createBook:function(){this.dialogVisible=!0,this.title="",this.isEdit=!1},deleteBook:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){g["delete"]("/book/".concat(t)).then((function(){e.$message({type:"success",message:"删除成功!"}),e.getBookList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},updateBook:function(t,e,i,o){this.dialogVisible=!0,this.title=e,this.isEdit=!0,this.updateId=t,this.orderby=o,this.fileList=[{url:i}],this.img=i},getBookList:function(){var t=this;g.get("/book?page=1&total=10").then((function(e){t.bookList=e.data.data}))},getUploadUrl:function(){return"/upload"},handleRemove:function(t,e){console.log(t),console.log(e)},handlePreview:function(t){console.log(t)},handleSuccess:function(t,e,i){console.log(e),console.log(i),this.img=t.data.file}},data:function(){return{fileList:[],bookList:[],orderby:"",dialogVisible:!1,title:"",isEdit:!1,updateId:0,img:"",headers:{token:""}}},created:function(){this.getBookList()}},_=v,y=(0,r.Z)(_,h,f,!1,null,"3351d0d0",null),x=y.exports,k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"blog"},[i("el-button",{attrs:{type:"text"},on:{click:t.createBlog}},[t._v("新建博客")]),i("el-table",{attrs:{data:t.blogList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticClass:"pic",attrs:{src:t.row.img,alt:""}})]}}])}),i("el-table-column",{attrs:{prop:"title",label:"标题"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateBlog(e.row.id)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteBlog(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)},w=[],L={data:function(){return{name:"",blogList:[]}},methods:{deleteBlog:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){g["delete"]("/blog/".concat(t)).then((function(){e.getBlogList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},createBlog:function(){this.$router.push("/createBlog")},updateBlog:function(t){this.$router.push("/blog/".concat(t))},getBlogList:function(){var t=this;g.get("/blog?page=1&total=10").then((function(e){t.blogList=e.data.data}))}},created:function(){this.getBlogList()}},C=L,$=(0,r.Z)(C,k,w,!1,null,"10d057f3",null),S=$.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"resource"},[i("el-button",{attrs:{type:"btn"},on:{click:t.createResource}},[t._v("添加资源")]),i("el-table",{attrs:{data:t.resourceList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{prop:"title",label:"姓名"}}),i("el-table-column",{attrs:{prop:"code",label:"提取码"}}),i("el-table-column",{attrs:{prop:"url",label:"下载地址"}}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateResource(e.row.id,e.row.title,e.row.code,e.row.url)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteRosource(e.row.id)}}},[t._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"添加",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",[i("el-form-item",{attrs:{label:"视频标题"}},[i("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("el-form-item",{attrs:{label:"资源地址"}},[i("el-input",{model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1),i("el-form-item",{attrs:{label:"提取码"}},[i("el-input",{model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},B=[],E={methods:{getDetail:function(t){this.$router.push("/chapter?book_id=".concat(t))},save:function(){var t=this;this.isEdit?g.put("/resource/".concat(this.updateId),{title:this.title,code:this.code,url:this.url}).then((function(){t.getResourceList(),t.dialogVisible=!1})):g.post("/resource",{title:this.title,code:this.code,url:this.url}).then((function(){t.getResourceList(),t.dialogVisible=!1}))},createResource:function(){this.dialogVisible=!0,this.title="",this.isEdit=!1},deleteRosource:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){g["delete"]("/resource/".concat(t)).then((function(){e.$message({type:"success",message:"删除成功!"}),e.getResourceList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},updateResource:function(t,e,i,o){this.dialogVisible=!0,this.title=e,this.isEdit=!0,this.updateId=t,this.url=o,this.code=i},getResourceList:function(){var t=this;g.get("/resource?page=1&total=10").then((function(e){t.resourceList=e.data.data}))}},data:function(){return{resourceList:[],url:"",dialogVisible:!1,title:"",isEdit:!1,updateId:0,code:"",headers:{token:""}}},created:function(){this.getResourceList()}},U=E,I=(0,r.Z)(U,V,B,!1,null,"815d94d2",null),T=I.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h1",[t._v("首页")])},R=[],z={},Z=(0,r.Z)(z,D,R,!1,null,null,null),O=Z.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video"},[i("el-button",{attrs:{type:"btn"},on:{click:t.createVideo}},[t._v("添加视频")]),i("el-table",{attrs:{data:t.videoList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticClass:"pic",attrs:{src:t.row.img,alt:""}})]}}])}),i("el-table-column",{attrs:{prop:"title",label:"姓名"}}),i("el-table-column",{attrs:{label:"详情",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.getDetail(e.row.iframe_url)}}},[t._v("浏览视频")])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateVideo(e.row.id,e.row.title,e.row.img,e.row.iframe_url)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteVideo(e.row.id)}}},[t._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"添加",visible:t.videoIsShow,width:"800px"},on:{"update:visible":function(e){t.videoIsShow=e}}},[i("div",{staticClass:"test",domProps:{innerHTML:t._s(t.video_url)}})]),i("el-dialog",{attrs:{title:"添加",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{attrs:{id:"cover"}},[i("span",{staticClass:"cover_cover"},[t._v("上传封面:")]),i("el-upload",{attrs:{action:t.getUploadUrl(),"list-type":"picture-card","on-preview":t.handleSuccess,"on-remove":t.handleRemove,headers:t.headers,"on-success":t.handleSuccess,"file-list":t.fileList}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-form",[i("el-form-item",{attrs:{label:"视频标题"}},[i("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("el-form-item",{attrs:{label:"视频地址"}},[i("el-input",{model:{value:t.iframe_url,callback:function(e){t.iframe_url=e},expression:"iframe_url"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},j=[],A={methods:{getDetail:function(t){this.videoIsShow=!0,this.video_url=t,console.log(t)},save:function(){var t=this;this.isEdit?g.put("/video/".concat(this.updateId),{title:this.title,img:this.img,iframe_url:this.iframe_url}).then((function(){t.getVideoList(),t.dialogVisible=!1})):g.post("/video",{title:this.title,img:this.img,iframe_url:this.iframe_url}).then((function(){t.getVideoList(),t.dialogVisible=!1}))},createVideo:function(){this.dialogVisible=!0,this.title="",this.iframe_url="",this.isEdit=!1},deleteVideo:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){g["delete"]("/video/".concat(t)).then((function(){e.$message({type:"success",message:"删除成功!"}),e.getVideoList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},updateVideo:function(t,e,i,o){this.dialogVisible=!0,this.title=e,this.isEdit=!0,this.updateId=t,this.iframe_url=o,this.fileList=[{url:i}],this.img=i},getVideoList:function(){var t=this;g.get("/video?page=1&total=10").then((function(e){t.videoList=e.data.data}))},getUploadUrl:function(){return"/upload"},handleRemove:function(t,e){console.log(t),console.log(e)},handlePreview:function(t){console.log(t)},handleSuccess:function(t,e,i){console.log(e),console.log(i),this.img=t.data.file}},data:function(){return{fileList:[],videoList:[],iframe_url:"",dialogVisible:!1,title:"",isEdit:!1,updateId:0,img:"",videoIsShow:!1,video_url:"<h1>123</h1>",headers:{token:""}}},created:function(){this.getVideoList()}},q=A,M=(0,r.Z)(q,P,j,!1,null,null,null),F=M.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user"},[i("el-button",{attrs:{type:"btn"},on:{click:t.createUser}},[t._v("添加用户")]),i("el-table",{attrs:{data:t.userList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{prop:"username",label:"姓名"}}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.resetPassword(e.row.id,e.row.username)}}},[t._v("重置密码")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteUser(e.row.id)}}},[t._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"添加",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",[i("el-form-item",{attrs:{label:"用户名"}},[i("el-input",{attrs:{disabled:t.cantBeEdited},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),i("el-form-item",{attrs:{label:"密码"}},[i("el-input",{attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},G=[],J={methods:{save:function(){var t=this;this.isEdit?g.put("/user/".concat(this.updateId),{password:this.password}).then((function(){t.getUserList(),t.dialogVisible=!1})):g.post("/user",{username:this.username,password:this.password}).then((function(){t.getUserList(),t.dialogVisible=!1}))},createUser:function(){this.dialogVisible=!0,this.username="",this.password="",this.isEdit=!1,this.cantBeEdited=!1},deleteUser:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){g["delete"]("/user/".concat(t)).then((function(){e.$message({type:"success",message:"删除成功!"}),e.getUserList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},resetPassword:function(t,e){this.dialogVisible=!0,this.isEdit=!0,this.updateId=t,this.cantBeEdited=!0,this.username=e,this.password=""},getUserList:function(){var t=this;g.get("/user?page=1&total=10").then((function(e){t.userList=e.data.data}))}},data:function(){return{userList:[],password:"",dialogVisible:!1,username:"",isEdit:!1,updateId:0,headers:{token:""},cantBeEdited:!1}},created:function(){this.getUserList()}},K=J,N=(0,r.Z)(K,H,G,!1,null,"5d796251",null),Q=N.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout"},[i("div",{staticClass:"menu"},[i("el-radio-group",{staticStyle:{"margin-bottom":"20px"},model:{value:t.isCollapse,callback:function(e){t.isCollapse=e},expression:"isCollapse"}},[i("el-radio-button",{attrs:{label:!1}},[t._v("展开")]),i("el-radio-button",{attrs:{label:!0}},[t._v("收起")])],1),i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1-4-1",collapse:t.isCollapse,router:""},on:{open:t.handleOpen,close:t.handleClose}},[i("el-menu-item",{attrs:{index:"/book"}},[i("i",{staticClass:"el-icon-menu"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 书籍管理 ")])]),i("el-menu-item",{attrs:{index:"/blog"}},[i("i",{staticClass:"el-icon-document"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v("博客管理")])]),i("el-menu-item",{attrs:{index:"/video"}},[i("i",{staticClass:"el-icon-setting"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v("视频管理")])]),i("el-menu-item",{attrs:{index:"/resource"}},[i("i",{staticClass:"el-icon-setting"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v("资源列表")])]),i("el-submenu",{attrs:{index:"1"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-location"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户管理")])]),i("el-menu-item",{attrs:{index:"/user"}},[t._v("用户列表")]),i("el-menu-item",{on:{click:t.logout}},[t._v("注销")])],2)],1)],1),i("div",{staticClass:"container"},[i("router-view")],1)])},X=[],Y={data:function(){return{isCollapse:!1}},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},logout:function(){localStorage.setItem("token",""),location.reload()}}},tt=Y,et=(0,r.Z)(tt,W,X,!1,null,null,null),it=et.exports,ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("div",{staticClass:"form"},[i("h1",[t._v("用户登录")]),i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"用户名称"}},[i("el-input",{model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),i("el-form-item",{attrs:{label:"用户密码"}},[i("el-input",{model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)])},nt=[],lt={data:function(){return{user:{username:"",password:""}}},methods:{login:function(){var t=this;g.post("/login",this.user).then((function(e){2e4===e.data.code?(localStorage.setItem("token",e.data.token),t.$router.push("/")):console.log("登录失败")}))}}},st=lt,at=(0,r.Z)(st,ot,nt,!1,null,"4a6f3f7c",null),rt=at.exports,ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"cover"}},[i("span",{staticClass:"cover_cover"},[t._v("上传封面:")]),i("el-upload",{attrs:{action:t.getUploadUrl(),"list-type":"picture-card","on-preview":t.handleSuccess,"on-remove":t.handleRemove,headers:t.headers,"on-success":t.handleSuccess,"file-list":t.fileList}},[i("i",{staticClass:"el-icon-plus"})])],1),i("div",{staticClass:"title"},[i("el-input",{staticClass:"title_titlei",attrs:{placeholder:"节名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("div",{attrs:{id:"main"}},[i("mavon-editor",{ref:"md",staticClass:"title_titlem",on:{change:t.changeData,imgAdd:t.imgAdd,imgDel:t.imgDel},model:{value:t.md_text,callback:function(e){t.md_text=e},expression:"md_text"}}),i("div",[i("el-button",{staticClass:"title_titleb",attrs:{type:"success"},on:{click:t.save}},[t._v("保存")])],1)],1)])},ut=[],dt={data:function(){return{fileList:[],md_text:"",html_text:"",img:"",title:"",headers:{token:""}}},methods:{save:function(){this.id?this.updateBlog():this.createBlog()},createBlog:function(){var t=this;g({url:"/blog",method:"post",data:{md_text:this.md_text,html_text:this.html_text,img:this.img,title:this.title}}).then((function(){t.$router.push("/blog")}))},updateBlog:function(){var t=this;g({url:"/blog/".concat(this.id),method:"put",data:{md_text:this.md_text,html_text:this.html_text,img:this.img,title:this.title}}).then((function(){t.$router.push("/blog")}))},getUploadUrl:function(){return"/upload"},changeData:function(t,e){this.html_text=e},imgAdd:function(t,e){var i=this,o=new FormData;o.append("image",e),console.log(e,"$file"),g({url:"/upload",method:"post",data:o,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var o=e.data.data.file;i.$refs.md.$img2Url(t,o)})).catch((function(t){console.log(t)}))},imgDel:function(){},upload:function(){},handleRemove:function(t,e){console.log(t),console.log(e)},handlePreview:function(t){console.log(t)},handleSuccess:function(t,e,i){console.log(e),console.log(i),this.img=t.data.file}},computed:{id:function(){return this.$route.params.id}},created:function(){var t=this;this.id&&g({url:"/blog/".concat(this.id),method:"get"}).then((function(e){var i=e.data.data;t.title=i.title,t.fileList=[{url:i.img}],t.img=i.img,t.md_text=i.md_text,t.html_text=i.html_text}))}},ht=dt,ft=(0,r.Z)(ht,ct,ut,!1,null,null,null),pt=ft.exports,mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"title"},[i("el-input",{attrs:{placeholder:"小节标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("div",{staticClass:"title"},[i("el-input",{attrs:{placeholder:"排序权重"},model:{value:t.orderby,callback:function(e){t.orderby=e},expression:"orderby"}})],1),i("div",{attrs:{id:"main"}},[i("mavon-editor",{ref:"md",staticClass:"title_titlem",on:{change:t.changeData,imgAdd:t.imgAdd,imgDel:t.imgDel},model:{value:t.md_text,callback:function(e){t.md_text=e},expression:"md_text"}}),i("div",[i("el-button",{staticClass:"title_titleb",attrs:{type:"success"},on:{click:t.save}},[t._v("保存")])],1)],1)])},bt=[],gt={data:function(){return{fileList:[],md_text:"",html_text:"",title:"",orderby:"",headers:{token:""}}},methods:{save:function(){this.id?this.updateSection():this.createSection()},createSection:function(){var t=this;g({url:"/section",method:"post",data:{md_text:this.md_text,html_text:this.html_text,title:this.title,chapter_id:this.chapter_id,orderby:this.orderby}}).then((function(){t.$router.push("/section?chapter_id=".concat(t.chapter_id))}))},updateSection:function(){var t=this;g({url:"/section/".concat(this.id),method:"put",data:{md_text:this.md_text,html_text:this.html_text,title:this.title,chapter_id:this.chapter_id,orderby:this.orderby}}).then((function(){t.$router.push("/section?chapter_id=".concat(t.chapter_id))}))},getUploadUrl:function(){return"/upload"},changeData:function(t,e){this.html_text=e},imgAdd:function(t,e){var i=this,o=new FormData;o.append("image",e),console.log(e,"$file"),g({url:"/upload",method:"post",data:o,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var o=e.data.data.file;i.$refs.md.$img2Url(t,o)})).catch((function(t){console.log(t)}))},imgDel:function(){},upload:function(){}},computed:{chapter_id:function(){return this.$route.query.chapter_id},id:function(){return this.$route.params.id}},created:function(){var t=this;console.log(this.id),this.id&&g({url:"/section/".concat(this.id),method:"get"}).then((function(e){var i=e.data.data;t.title=i.title,t.fileList=[{url:i.img}],t.md_text=i.md_text,t.html_text=i.html_text,t.orderby=i.orderby,t.chapter_id=i.chapter_id}))}},vt=gt,_t=(0,r.Z)(vt,mt,bt,!1,null,null,null),yt=_t.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-button",{attrs:{type:"btn"},on:{click:t.cheateChapter}},[t._v("添加章")]),i("el-table",{attrs:{data:t.chapterList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{prop:"title",label:"姓名"}}),i("el-table-column",{attrs:{label:"详情",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.getDetail(e.row.id)}}},[t._v("查看小节")])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateChapter(e.row.id,e.row.title,e.row.orderby)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteChapter(e.row.id)}}},[t._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"添加",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",[i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("el-form-item",{attrs:{label:"权重"}},[i("el-input",{model:{value:t.orderby,callback:function(e){t.orderby=e},expression:"orderby"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},kt=[],wt={methods:{getDetail:function(t){this.$router.push("/section?chapter_id=".concat(t))},save:function(){var t=this;this.isEdit?g.put("/chapter/".concat(this.updateId),{title:this.title,book_id:this.book_id,orderby:this.orderby}).then((function(){t.getChapterList(),t.dialogVisible=!1})):g.post("/chapter",{title:this.title,book_id:this.book_id,orderby:this.orderby}).then((function(){t.getChapterList(),t.dialogVisible=!1}))},cheateChapter:function(){this.dialogVisible=!0,this.title="",this.isEdit=!1,this.orderby=""},deleteChapter:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){g["delete"]("/chapter/".concat(t)).then((function(){e.$message({type:"success",message:"删除成功!"}),e.getChapterList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},updateChapter:function(t,e,i){this.dialogVisible=!0,this.title=e,this.isEdit=!0,this.updateId=t,this.orderby=i},getChapterList:function(){var t=this;g.get("/chapter?book_id=".concat(this.book_id)).then((function(e){t.chapterList=e.data.data}))}},data:function(){return{chapterList:[],dialogVisible:!1,title:"",isEdit:!1,updateId:0,orderby:""}},computed:{book_id:function(){return this.$route.query.book_id}},created:function(){this.getChapterList()}},Lt=wt,Ct=(0,r.Z)(Lt,xt,kt,!1,null,null,null),$t=Ct.exports,St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-button",{attrs:{type:"btn"},on:{click:t.createSection}},[t._v("添加小节")]),i("el-table",{attrs:{data:t.chapterList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{prop:"title",label:"姓名"}}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateSection(e.row.id)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteSection(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)},Vt=[],Bt=(i(2222),{methods:{createSection:function(){this.$router.push("/createSection?chapter_id=".concat(this.chapter_id))},updateSection:function(t){this.$router.push("/section/".concat(t,"?chapter_id=").concat(this.chapter_id))},deleteSection:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){g["delete"]("/section/".concat(t)).then((function(){e.$message({type:"success",message:"删除成功!"}),e.gitSectionList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},gitSectionList:function(){var t=this;g.get("/section?chapter_id=".concat(this.chapter_id)).then((function(e){t.chapterList=e.data.data}))}},data:function(){return{chapterList:[],title:""}},computed:{chapter_id:function(){return this.$route.query.chapter_id}},created:function(){this.gitSectionList()}}),Et=Bt,Ut=(0,r.Z)(Et,St,Vt,!1,null,null,null),It=Ut.exports;o["default"].use(d.Z);var Tt=[{path:"/",name:"",component:it,children:[{path:"/",name:"",component:O},{path:"/book",name:"",component:x},{path:"/chapter",name:"",component:$t},{path:"/section",name:"",component:It},{path:"/section/:id",name:"",component:yt},{path:"/createSection",name:"",component:yt},{path:"/blog",name:"",component:S},{path:"/blog/:id",name:"",component:pt},{path:"/createBlog",name:"",component:pt},{path:"/video",name:"",component:F},{path:"/resource",name:"",component:T},{path:"/user",name:"",component:Q}]},{path:"/login",name:"Login",component:rt}],Dt=new d.Z({mode:"history",base:"/",routes:Tt});Dt.beforeEach((function(t,e,i){"/login"==t.path||localStorage.getItem("token")?i():i("/login")}));var Rt=d.Z.prototype.push;d.Z.prototype.push=function(t){return Rt.call(this,t).catch((function(t){return t}))};var zt=Dt,Zt=i(4549),Ot=i.n(Zt),Pt=i(4408),jt=i.n(Pt);o["default"].use(jt()),o["default"].use(Ot()),o["default"].config.productionTip=!1,new o["default"]({router:zt,render:function(t){return t(u)}}).$mount("#app")}},e={};function i(o){var n=e[o];if(void 0!==n)return n.exports;var l=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}i.m=t,function(){var t=[];i.O=function(e,o,n,l){if(!o){var s=1/0;for(u=0;u<t.length;u++){o=t[u][0],n=t[u][1],l=t[u][2];for(var a=!0,r=0;r<o.length;r++)(!1&l||s>=l)&&Object.keys(i.O).every((function(t){return i.O[t](o[r])}))?o.splice(r--,1):(a=!1,l<s&&(s=l));if(a){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}l=l||0;for(var u=t.length;u>0&&t[u-1][2]>l;u--)t[u]=t[u-1];t[u]=[o,n,l]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,l,s=o[0],a=o[1],r=o[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(r)var u=r(i)}for(e&&e(o);c<s.length;c++)l=s[c],i.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return i.O(u)},o=self["webpackChunkadmin_web"]=self["webpackChunkadmin_web"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=i.O(void 0,[998],(function(){return i(4039)}));o=i.O(o)})();
//# sourceMappingURL=app-legacy.a1451cfe.js.map