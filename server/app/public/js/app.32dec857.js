(function(){"use strict";var t={4039:function(t,e,i){var l=i(8935),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("router-view")],1)},o=[],a={},r=a,n=i(1001),c=(0,n.Z)(r,s,o,!1,null,null,null),d=c.exports,u=i(2809),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book"},[i("el-button",{attrs:{type:"btn"},on:{click:t.createBook}},[t._v("添加书籍")]),i("el-table",{attrs:{data:t.bookList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticClass:"pic",attrs:{src:t.row.img,alt:""}})]}}])}),i("el-table-column",{attrs:{prop:"title",label:"姓名"}}),i("el-table-column",{attrs:{label:"详情",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.getDetail(e.row.id)}}},[t._v("查看章")])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateBook(e.row.id,e.row.title,e.row.img,e.row.orderby)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteBook(e.row.id)}}},[t._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"添加",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{attrs:{id:"cover"}},[i("span",{staticClass:"cover_cover"},[t._v("上传封面:")]),i("el-upload",{attrs:{action:t.getUploadUrl(),"list-type":"picture-card","on-preview":t.handleSuccess,"on-remove":t.handleRemove,headers:t.headers,"on-success":t.handleSuccess,"file-list":t.fileList}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-form",[i("el-form-item",{attrs:{label:"书籍名称"}},[i("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("el-form-item",{attrs:{label:"排序权重"}},[i("el-input",{model:{value:t.orderby,callback:function(e){t.orderby=e},expression:"orderby"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},p=[],m=i(6166),b=i.n(m);const g=b().create({baseURL:"/",timeout:5e3});g.interceptors.request.use((t=>(localStorage.getItem("token")&&(t.headers["token"]=localStorage.getItem("token")),t)));var f=g,v={methods:{getDetail(t){this.$router.push(`/chapter?book_id=${t}`)},save(){this.isEdit?f.put(`/book/${this.updateId}`,{title:this.title,img:this.img,orderby:this.orderby}).then((()=>{this.getBookList(),this.dialogVisible=!1})):f.post("/book",{title:this.title,img:this.img,orderby:this.orderby}).then((()=>{this.getBookList(),this.dialogVisible=!1}))},createBook(){this.dialogVisible=!0,this.title="",this.isEdit=!1},deleteBook(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{f["delete"](`/book/${t}`).then((()=>{this.$message({type:"success",message:"删除成功!"}),this.getBookList()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},updateBook(t,e,i,l){this.dialogVisible=!0,this.title=e,this.isEdit=!0,this.updateId=t,this.orderby=l,this.fileList=[{url:i}],this.img=i},getBookList(){f.get("/book?page=1&total=10").then((t=>{this.bookList=t.data.data}))},getUploadUrl(){return"/upload"},handleRemove(t,e){console.log(t),console.log(e)},handlePreview(t){console.log(t)},handleSuccess(t,e,i){console.log(e),console.log(i),this.img=t.data.file}},data(){return{fileList:[],bookList:[],orderby:"",dialogVisible:!1,title:"",isEdit:!1,updateId:0,img:"",headers:{token:""}}},created(){this.getBookList()}},_=v,y=(0,n.Z)(_,h,p,!1,null,"3351d0d0",null),x=y.exports,k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"blog"},[i("el-button",{attrs:{type:"text"},on:{click:t.createBlog}},[t._v("新建博客")]),i("el-table",{attrs:{data:t.blogList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticClass:"pic",attrs:{src:t.row.img,alt:""}})]}}])}),i("el-table-column",{attrs:{prop:"title",label:"标题"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateBlog(e.row.id)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteBlog(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)},w=[],$={data(){return{name:"",blogList:[]}},methods:{deleteBlog(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{f["delete"](`/blog/${t}`).then((()=>{this.getBlogList()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},createBlog(){this.$router.push("/createBlog")},updateBlog(t){this.$router.push(`/blog/${t}`)},getBlogList(){f.get("/blog?page=1&total=10").then((t=>{this.blogList=t.data.data}))}},created(){this.getBlogList()}},L=$,C=(0,n.Z)(L,k,w,!1,null,"10d057f3",null),S=C.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"resource"},[i("el-button",{attrs:{type:"btn"},on:{click:t.createResource}},[t._v("添加资源")]),i("el-table",{attrs:{data:t.resourceList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{prop:"title",label:"姓名"}}),i("el-table-column",{attrs:{prop:"code",label:"提取码"}}),i("el-table-column",{attrs:{prop:"url",label:"下载地址"}}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateResource(e.row.id,e.row.title,e.row.code,e.row.url)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteRosource(e.row.id)}}},[t._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"添加",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",[i("el-form-item",{attrs:{label:"视频标题"}},[i("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("el-form-item",{attrs:{label:"资源地址"}},[i("el-input",{model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1),i("el-form-item",{attrs:{label:"提取码"}},[i("el-input",{model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},B=[],E={methods:{getDetail(t){this.$router.push(`/chapter?book_id=${t}`)},save(){this.isEdit?f.put(`/resource/${this.updateId}`,{title:this.title,code:this.code,url:this.url}).then((()=>{this.getResourceList(),this.dialogVisible=!1})):f.post("/resource",{title:this.title,code:this.code,url:this.url}).then((()=>{this.getResourceList(),this.dialogVisible=!1}))},createResource(){this.dialogVisible=!0,this.title="",this.isEdit=!1},deleteRosource(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{f["delete"](`/resource/${t}`).then((()=>{this.$message({type:"success",message:"删除成功!"}),this.getResourceList()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},updateResource(t,e,i,l){this.dialogVisible=!0,this.title=e,this.isEdit=!0,this.updateId=t,this.url=l,this.code=i},getResourceList(){f.get("/resource?page=1&total=10").then((t=>{this.resourceList=t.data.data}))}},data(){return{resourceList:[],url:"",dialogVisible:!1,title:"",isEdit:!1,updateId:0,code:"",headers:{token:""}}},created(){this.getResourceList()}},U=E,I=(0,n.Z)(U,V,B,!1,null,"815d94d2",null),T=I.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h1",[t._v("首页")])},R=[],z={},Z=(0,n.Z)(z,D,R,!1,null,null,null),O=Z.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video"},[i("el-button",{attrs:{type:"btn"},on:{click:t.createVideo}},[t._v("添加视频")]),i("el-table",{attrs:{data:t.videoList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticClass:"pic",attrs:{src:t.row.img,alt:""}})]}}])}),i("el-table-column",{attrs:{prop:"title",label:"姓名"}}),i("el-table-column",{attrs:{label:"详情",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.getDetail(e.row.iframe_url)}}},[t._v("浏览视频")])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateVideo(e.row.id,e.row.title,e.row.img,e.row.iframe_url)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteVideo(e.row.id)}}},[t._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"添加",visible:t.videoIsShow,width:"800px"},on:{"update:visible":function(e){t.videoIsShow=e}}},[i("div",{staticClass:"test",domProps:{innerHTML:t._s(t.video_url)}})]),i("el-dialog",{attrs:{title:"添加",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{attrs:{id:"cover"}},[i("span",{staticClass:"cover_cover"},[t._v("上传封面:")]),i("el-upload",{attrs:{action:t.getUploadUrl(),"list-type":"picture-card","on-preview":t.handleSuccess,"on-remove":t.handleRemove,headers:t.headers,"on-success":t.handleSuccess,"file-list":t.fileList}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-form",[i("el-form-item",{attrs:{label:"视频标题"}},[i("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("el-form-item",{attrs:{label:"视频地址"}},[i("el-input",{model:{value:t.iframe_url,callback:function(e){t.iframe_url=e},expression:"iframe_url"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},j=[],A={methods:{getDetail(t){this.videoIsShow=!0,this.video_url=t,console.log(t)},save(){this.isEdit?f.put(`/video/${this.updateId}`,{title:this.title,img:this.img,iframe_url:this.iframe_url}).then((()=>{this.getVideoList(),this.dialogVisible=!1})):f.post("/video",{title:this.title,img:this.img,iframe_url:this.iframe_url}).then((()=>{this.getVideoList(),this.dialogVisible=!1}))},createVideo(){this.dialogVisible=!0,this.title="",this.iframe_url="",this.isEdit=!1},deleteVideo(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{f["delete"](`/video/${t}`).then((()=>{this.$message({type:"success",message:"删除成功!"}),this.getVideoList()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},updateVideo(t,e,i,l){this.dialogVisible=!0,this.title=e,this.isEdit=!0,this.updateId=t,this.iframe_url=l,this.fileList=[{url:i}],this.img=i},getVideoList(){f.get("/video?page=1&total=10").then((t=>{this.videoList=t.data.data}))},getUploadUrl(){return"/upload"},handleRemove(t,e){console.log(t),console.log(e)},handlePreview(t){console.log(t)},handleSuccess(t,e,i){console.log(e),console.log(i),this.img=t.data.file}},data(){return{fileList:[],videoList:[],iframe_url:"",dialogVisible:!1,title:"",isEdit:!1,updateId:0,img:"",videoIsShow:!1,video_url:"<h1>123</h1>",headers:{token:""}}},created(){this.getVideoList()}},q=A,M=(0,n.Z)(q,P,j,!1,null,null,null),F=M.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user"},[i("el-button",{attrs:{type:"btn"},on:{click:t.createUser}},[t._v("添加用户")]),i("el-table",{attrs:{data:t.userList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{prop:"username",label:"姓名"}}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.resetPassword(e.row.id,e.row.username)}}},[t._v("重置密码")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteUser(e.row.id)}}},[t._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"添加",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",[i("el-form-item",{attrs:{label:"用户名"}},[i("el-input",{attrs:{disabled:t.cantBeEdited},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),i("el-form-item",{attrs:{label:"密码"}},[i("el-input",{attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},G=[],J={methods:{save(){this.isEdit?f.put(`/user/${this.updateId}`,{password:this.password}).then((()=>{this.getUserList(),this.dialogVisible=!1})):f.post("/user",{username:this.username,password:this.password}).then((()=>{this.getUserList(),this.dialogVisible=!1}))},createUser(){this.dialogVisible=!0,this.username="",this.password="",this.isEdit=!1,this.cantBeEdited=!1},deleteUser(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{f["delete"](`/user/${t}`).then((()=>{this.$message({type:"success",message:"删除成功!"}),this.getUserList()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},resetPassword(t,e){this.dialogVisible=!0,this.isEdit=!0,this.updateId=t,this.cantBeEdited=!0,this.username=e,this.password=""},getUserList(){f.get("/user?page=1&total=10").then((t=>{this.userList=t.data.data}))}},data(){return{userList:[],password:"",dialogVisible:!1,username:"",isEdit:!1,updateId:0,headers:{token:""},cantBeEdited:!1}},created(){this.getUserList()}},K=J,N=(0,n.Z)(K,H,G,!1,null,"5d796251",null),Q=N.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout"},[i("div",{staticClass:"menu"},[i("el-radio-group",{staticStyle:{"margin-bottom":"20px"},model:{value:t.isCollapse,callback:function(e){t.isCollapse=e},expression:"isCollapse"}},[i("el-radio-button",{attrs:{label:!1}},[t._v("展开")]),i("el-radio-button",{attrs:{label:!0}},[t._v("收起")])],1),i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1-4-1",collapse:t.isCollapse,router:""},on:{open:t.handleOpen,close:t.handleClose}},[i("el-menu-item",{attrs:{index:"/book"}},[i("i",{staticClass:"el-icon-menu"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 书籍管理 ")])]),i("el-menu-item",{attrs:{index:"/blog"}},[i("i",{staticClass:"el-icon-document"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v("博客管理")])]),i("el-menu-item",{attrs:{index:"/video"}},[i("i",{staticClass:"el-icon-setting"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v("视频管理")])]),i("el-menu-item",{attrs:{index:"/resource"}},[i("i",{staticClass:"el-icon-setting"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v("资源列表")])]),i("el-submenu",{attrs:{index:"1"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-location"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户管理")])]),i("el-menu-item",{attrs:{index:"/user"}},[t._v("用户列表")]),i("el-menu-item",{on:{click:t.logout}},[t._v("注销")])],2)],1)],1),i("div",{staticClass:"container"},[i("router-view")],1)])},X=[],Y={data(){return{isCollapse:!1}},methods:{handleOpen(t,e){console.log(t,e)},handleClose(t,e){console.log(t,e)},logout(){localStorage.setItem("token",""),location.reload()}}},tt=Y,et=(0,n.Z)(tt,W,X,!1,null,null,null),it=et.exports,lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("div",{staticClass:"form"},[i("h1",[t._v("用户登录")]),i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"用户名称"}},[i("el-input",{model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),i("el-form-item",{attrs:{label:"用户密码"}},[i("el-input",{model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)])},st=[],ot={data(){return{user:{username:"",password:""}}},methods:{login(){f.post("/login",this.user).then((t=>{2e4===t.data.code?(localStorage.setItem("token",t.data.token),this.$router.push("/")):console.log("登录失败")}))}}},at=ot,rt=(0,n.Z)(at,lt,st,!1,null,"4a6f3f7c",null),nt=rt.exports,ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"cover"}},[i("span",{staticClass:"cover_cover"},[t._v("上传封面:")]),i("el-upload",{attrs:{action:t.getUploadUrl(),"list-type":"picture-card","on-preview":t.handleSuccess,"on-remove":t.handleRemove,headers:t.headers,"on-success":t.handleSuccess,"file-list":t.fileList}},[i("i",{staticClass:"el-icon-plus"})])],1),i("div",{staticClass:"title"},[i("el-input",{staticClass:"title_titlei",attrs:{placeholder:"节名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("div",{attrs:{id:"main"}},[i("mavon-editor",{ref:"md",staticClass:"title_titlem",on:{change:t.changeData,imgAdd:t.imgAdd,imgDel:t.imgDel},model:{value:t.md_text,callback:function(e){t.md_text=e},expression:"md_text"}}),i("div",[i("el-button",{staticClass:"title_titleb",attrs:{type:"success"},on:{click:t.save}},[t._v("保存")])],1)],1)])},dt=[],ut={data(){return{fileList:[],md_text:"",html_text:"",img:"",title:"",headers:{token:""}}},methods:{save(){this.id?this.updateBlog():this.createBlog()},createBlog(){f({url:"/blog",method:"post",data:{md_text:this.md_text,html_text:this.html_text,img:this.img,title:this.title}}).then((()=>{this.$router.push("/blog")}))},updateBlog(){f({url:`/blog/${this.id}`,method:"put",data:{md_text:this.md_text,html_text:this.html_text,img:this.img,title:this.title}}).then((()=>{this.$router.push("/blog")}))},getUploadUrl(){return"/upload"},changeData(t,e){this.html_text=e},imgAdd(t,e){var i=new FormData;i.append("image",e),console.log(e,"$file"),f({url:"/upload",method:"post",data:i,headers:{"Content-Type":"multipart/form-data"}}).then((e=>{let i=e.data.data.file;this.$refs.md.$img2Url(t,i)})).catch((t=>{console.log(t)}))},imgDel(){},upload(){},handleRemove(t,e){console.log(t),console.log(e)},handlePreview(t){console.log(t)},handleSuccess(t,e,i){console.log(e),console.log(i),this.img=t.data.file}},computed:{id(){return this.$route.params.id}},created(){this.id&&f({url:`/blog/${this.id}`,method:"get"}).then((t=>{let e=t.data.data;this.title=e.title,this.fileList=[{url:e.img}],this.img=e.img,this.md_text=e.md_text,this.html_text=e.html_text}))}},ht=ut,pt=(0,n.Z)(ht,ct,dt,!1,null,null,null),mt=pt.exports,bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"title"},[i("el-input",{attrs:{placeholder:"小节标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("div",{staticClass:"title"},[i("el-input",{attrs:{placeholder:"排序权重"},model:{value:t.orderby,callback:function(e){t.orderby=e},expression:"orderby"}})],1),i("div",{attrs:{id:"main"}},[i("mavon-editor",{ref:"md",staticClass:"title_titlem",on:{change:t.changeData,imgAdd:t.imgAdd,imgDel:t.imgDel},model:{value:t.md_text,callback:function(e){t.md_text=e},expression:"md_text"}}),i("div",[i("el-button",{staticClass:"title_titleb",attrs:{type:"success"},on:{click:t.save}},[t._v("保存")])],1)],1)])},gt=[],ft={data(){return{fileList:[],md_text:"",html_text:"",title:"",orderby:"",headers:{token:""}}},methods:{save(){this.id?this.updateSection():this.createSection()},createSection(){f({url:"/section",method:"post",data:{md_text:this.md_text,html_text:this.html_text,title:this.title,chapter_id:this.chapter_id,orderby:this.orderby}}).then((()=>{this.$router.push(`/section?chapter_id=${this.chapter_id}`)}))},updateSection(){f({url:`/section/${this.id}`,method:"put",data:{md_text:this.md_text,html_text:this.html_text,title:this.title,chapter_id:this.chapter_id,orderby:this.orderby}}).then((()=>{this.$router.push(`/section?chapter_id=${this.chapter_id}`)}))},getUploadUrl(){return"/upload"},changeData(t,e){this.html_text=e},imgAdd(t,e){var i=new FormData;i.append("image",e),console.log(e,"$file"),f({url:"/upload",method:"post",data:i,headers:{"Content-Type":"multipart/form-data"}}).then((e=>{let i=e.data.data.file;this.$refs.md.$img2Url(t,i)})).catch((t=>{console.log(t)}))},imgDel(){},upload(){}},computed:{chapter_id(){return this.$route.query.chapter_id},id(){return this.$route.params.id}},created(){console.log(this.id),this.id&&f({url:`/section/${this.id}`,method:"get"}).then((t=>{let e=t.data.data;this.title=e.title,this.fileList=[{url:e.img}],this.md_text=e.md_text,this.html_text=e.html_text,this.orderby=e.orderby,this.chapter_id=e.chapter_id}))}},vt=ft,_t=(0,n.Z)(vt,bt,gt,!1,null,null,null),yt=_t.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-button",{attrs:{type:"btn"},on:{click:t.cheateChapter}},[t._v("添加章")]),i("el-table",{attrs:{data:t.chapterList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{prop:"title",label:"姓名"}}),i("el-table-column",{attrs:{label:"详情",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.getDetail(e.row.id)}}},[t._v("查看小节")])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateChapter(e.row.id,e.row.title,e.row.orderby)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteChapter(e.row.id)}}},[t._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"添加",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",[i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("el-form-item",{attrs:{label:"权重"}},[i("el-input",{model:{value:t.orderby,callback:function(e){t.orderby=e},expression:"orderby"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},kt=[],wt={methods:{getDetail(t){this.$router.push(`/section?chapter_id=${t}`)},save(){this.isEdit?f.put(`/chapter/${this.updateId}`,{title:this.title,book_id:this.book_id,orderby:this.orderby}).then((()=>{this.getChapterList(),this.dialogVisible=!1})):f.post("/chapter",{title:this.title,book_id:this.book_id,orderby:this.orderby}).then((()=>{this.getChapterList(),this.dialogVisible=!1}))},cheateChapter(){this.dialogVisible=!0,this.title="",this.isEdit=!1,this.orderby=""},deleteChapter(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{f["delete"](`/chapter/${t}`).then((()=>{this.$message({type:"success",message:"删除成功!"}),this.getChapterList()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},updateChapter(t,e,i){this.dialogVisible=!0,this.title=e,this.isEdit=!0,this.updateId=t,this.orderby=i},getChapterList(){f.get(`/chapter?book_id=${this.book_id}`).then((t=>{this.chapterList=t.data.data}))}},data(){return{chapterList:[],dialogVisible:!1,title:"",isEdit:!1,updateId:0,orderby:""}},computed:{book_id(){return this.$route.query.book_id}},created(){this.getChapterList()}},$t=wt,Lt=(0,n.Z)($t,xt,kt,!1,null,null,null),Ct=Lt.exports,St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-button",{attrs:{type:"btn"},on:{click:t.createSection}},[t._v("添加小节")]),i("el-table",{attrs:{data:t.chapterList,border:""}},[i("el-table-column",{attrs:{align:"center",width:"100",label:"序号",type:"index"}}),i("el-table-column",{attrs:{prop:"title",label:"姓名"}}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.updateSection(e.row.id)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.deleteSection(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)},Vt=[],Bt={methods:{createSection(){this.$router.push(`/createSection?chapter_id=${this.chapter_id}`)},updateSection(t){this.$router.push(`/section/${t}?chapter_id=${this.chapter_id}`)},deleteSection(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{f["delete"](`/section/${t}`).then((()=>{this.$message({type:"success",message:"删除成功!"}),this.gitSectionList()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},gitSectionList(){f.get(`/section?chapter_id=${this.chapter_id}`).then((t=>{this.chapterList=t.data.data}))}},data(){return{chapterList:[],title:""}},computed:{chapter_id(){return this.$route.query.chapter_id}},created(){this.gitSectionList()}},Et=Bt,Ut=(0,n.Z)(Et,St,Vt,!1,null,null,null),It=Ut.exports;l["default"].use(u.Z);const Tt=[{path:"/",name:"",component:it,children:[{path:"/",name:"",component:O},{path:"/book",name:"",component:x},{path:"/chapter",name:"",component:Ct},{path:"/section",name:"",component:It},{path:"/section/:id",name:"",component:yt},{path:"/createSection",name:"",component:yt},{path:"/blog",name:"",component:S},{path:"/blog/:id",name:"",component:mt},{path:"/createBlog",name:"",component:mt},{path:"/video",name:"",component:F},{path:"/resource",name:"",component:T},{path:"/user",name:"",component:Q}]},{path:"/login",name:"Login",component:nt}],Dt=new u.Z({mode:"history",base:"/",routes:Tt});Dt.beforeEach(((t,e,i)=>{"/login"==t.path||localStorage.getItem("token")?i():i("/login")}));const Rt=u.Z.prototype.push;u.Z.prototype.push=function(t){return Rt.call(this,t).catch((t=>t))};var zt=Dt,Zt=i(4549),Ot=i.n(Zt),Pt=i(4408),jt=i.n(Pt);l["default"].use(jt()),l["default"].use(Ot()),l["default"].config.productionTip=!1,new l["default"]({router:zt,render:t=>t(d)}).$mount("#app")}},e={};function i(l){var s=e[l];if(void 0!==s)return s.exports;var o=e[l]={exports:{}};return t[l].call(o.exports,o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,l,s,o){if(!l){var a=1/0;for(d=0;d<t.length;d++){l=t[d][0],s=t[d][1],o=t[d][2];for(var r=!0,n=0;n<l.length;n++)(!1&o||a>=o)&&Object.keys(i.O).every((function(t){return i.O[t](l[n])}))?l.splice(n--,1):(r=!1,o<a&&(a=o));if(r){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[l,s,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var l in e)i.o(e,l)&&!i.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:e[l]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,l){var s,o,a=l[0],r=l[1],n=l[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(s in r)i.o(r,s)&&(i.m[s]=r[s]);if(n)var d=n(i)}for(e&&e(l);c<a.length;c++)o=a[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(d)},l=self["webpackChunkadmin_web"]=self["webpackChunkadmin_web"]||[];l.forEach(e.bind(null,0)),l.push=e.bind(null,l.push.bind(l))}();var l=i.O(void 0,[998],(function(){return i(4039)}));l=i.O(l)})();
//# sourceMappingURL=app.32dec857.js.map